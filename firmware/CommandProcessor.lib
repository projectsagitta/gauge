http://os.mbed.com/users/WiredHome/code/CommandProcessor/#102675d9346e
